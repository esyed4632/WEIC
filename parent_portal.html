<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Parent Portal</title>
<style>
body { font-family: Arial, sans-serif; background: linear-gradient(135deg, #2c3e50, #4ca1af); margin:0; padding:0; }
.container { max-width: 900px; margin: 50px auto; background: white; padding: 30px; border-radius: 10px; box-shadow: 0 10px 25px rgba(0,0,0,0.2); }
h1 { text-align: center; color: #2c3e50; margin-bottom: 30px; }
form { display: flex; flex-direction: column; gap: 15px; }
input { padding: 10px; font-size: 14px; border-radius: 5px; border: 1px solid #ccc; }
button { padding: 10px; background: #2c3e50; color: white; border: none; border-radius: 5px; font-size: 16px; cursor: pointer; }
button:hover { background: #1f2f3a; }
.error { color: #b00020; background: #ffe0e0; padding: 10px; border-radius: 5px; }
table { width: 100%; border-collapse: collapse; margin-top: 20px; }
th, td { border: 1px solid #ccc; padding: 8px; text-align: center; }
th { background: #2c3e50; color: white; }
.backBtn { background: #b0bec5; color: black; border: none; border-radius: 5px; padding: 8px 15px; cursor: pointer; margin-bottom: 20px; }
.backBtn:hover { background: #90a4ae; }
</style>
</head>
<body>

<div class="container">
    <h1>Parent Portal</h1>

    {% if not student %}
        <form method="POST">
            {% if error %}
                <div class="error">{{ error }}</div>
            {% endif %}
            <label>Child Name:</label>
            <input type="text" name="childName" required>
            <label>Date of Birth:</label>
            <input type="date" name="childDOB" required>
            <button type="submit">View Grades</button>
        </form>
    {% else %}
        <button class="backBtn" onclick="window.location.href='/parent_portal'">â¬… Back</button>
        <h2>{{ student.name }}'s Grades</h2>
        <table>
            <tr>
                <th>Course</th>
                <th>Assignments</th>
                <th>Average</th>
                <th>Letter</th>
            </tr>
            {% for course, scores in student.grades.items() %}
            <tr>
                <td>{{ course }}</td>
                <td>{{ scores|join(', ') }}</td>
                <td>{{ (scores|sum / scores|length)|round(1) }}</td>
                <td>
                    {% set avg = (scores|sum / scores|length) %}
                    {% if avg >= 90 %}A{% elif avg >= 80 %}B{% elif avg >= 70 %}C{% elif avg >= 60 %}D{% else %}F{% endif %}
                </td>
            </tr>
            {% endfor %}
        </table>
    {% endif %}
</div>

</body>
</html>
